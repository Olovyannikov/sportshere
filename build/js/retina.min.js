!function(){var t="undefined"==typeof exports?window:exports,e={check_mime_type:!0};function i(){}function n(t,e){this.path=t,null!=e?(this.at_2x_path=e,this.perform_check=!1):(this.at_2x_path=t.replace(/\.\w+$/,(function(t){return"@2x"+t})),this.perform_check=!0)}function a(t){this.el=t,this.path=new n(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var e=this;this.path.check_2x_variant((function(t){t&&e.swap()}))}t.Retina=i,i.configure=function(t){for(var i in null==t&&(t={}),t)e[i]=t[i]},i.init=function(e){null==e&&(e=t);var i=e.onload||new Function;e.onload=function(){var t,e,n=document.getElementsByTagName("img"),h=[];for(t=0;t<n.length;t++)e=n[t],h.push(new a(e));i()}},i.isRetina=function(){return t.devicePixelRatio>1||!(!t.matchMedia||!t.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)").matches)},t.RetinaImagePath=n,n.confirmed_paths=[],n.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},n.prototype.check_2x_variant=function(t){var i,a=this;return this.is_external()?t(!1):this.perform_check||void 0===this.at_2x_path||null===this.at_2x_path?this.at_2x_path in n.confirmed_paths?t(!0):((i=new XMLHttpRequest).open("HEAD",this.at_2x_path),i.onreadystatechange=function(){if(4!=i.readyState)return t(!1);if(i.status>=200&&i.status<=399){if(e.check_mime_type){var h=i.getResponseHeader("Content-Type");if(null==h||!h.match(/^image/i))return t(!1)}return n.confirmed_paths.push(a.at_2x_path),t(!0)}return t(!1)},void i.send()):t(!0)},t.RetinaImage=a,a.prototype.swap=function(t){void 0===t&&(t=this.path.at_2x_path);var e=this;!function i(){e.el.complete?(e.el.setAttribute("width",e.el.offsetWidth),e.el.setAttribute("height",e.el.offsetHeight),e.el.setAttribute("src",t)):setTimeout(i,5)}()},i.isRetina()&&i.init(t)}();